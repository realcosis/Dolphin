using Microsoft.Extensions.Logging;
using RC.Common;
using RC.Common.Injection;

namespace Dolphin.Core
{
    [Scoped]
    class LanguageLocale(ILogger<ILanguageLocale> logger) : IStartableService, ILanguageLocale
    {
        private Dictionary<string, string> Values = [];

        private readonly string locale = "#Language locale file for Dolphin Emulator r67\r\n#Language: English\r\n[SYSTEM]\r\nlocale.language=English\r\nshutdown.alert=WARNING: WAARSCHUWING: De server word afgesloten, alle meubels die je nog in je kamer zet na dit bericht of ruilt na dit bericht is op eigen risico\r\n\r\n[COMMANDS]\r\nwhosonline.usersonline=Sunnies online\r\nsetmax.maxusersreached=Je heb niet de rechten om meer dan 100 mensen toe te laten.\r\noverride.enabled= Lopen override enabled.\r\noverride.disabled=Lopen override disabled.\r\ncoins.awardmessage1= Heeft je beloont \r\ncoins.awardmessage2= credits!\r\ncoins.updateok=Credit  succesvol geupdated\r\npixels.awardmessage1= Heeft je beloont\r\npixels.awardmessage2= Pixels!\r\npixels.updateok=Pixels succesvol geupdated\r\nhotelallert.notice=Notitie van de hotel administrator:\r\nbuyx.maxminreached=Input error: het moet boven de 0 en onder de 50\r\nroombadge.error=Error: \r\nlanguage.notif= is van \r\nroominfo.title=Kamer informatie\r\nuserinfo.owner=Eigenaar: \r\nuserinfo.roomname=Kamer naam: \r\nuserinfo.usercount=Gebruikers in kamer: \r\nuserinfo.userinfotitle=Gebruiker informative voor gebruiker:\r\n userinfo.rank=Rank: \r\nuserinfo.isonline=Sunnie online: \r\nuserinfo.userid=UserID: \r\nuserinfo.visitingroom=Bezoek kamer: \r\nuserinfo.motto=Gebruikers missie: \r\nuserinfo.credits= Gebruikers credits: \r\nuserinfo.ismuted= Gebruiker muted: \r\ninvisible.enabled=Toeschouwer modes enabled herlaad de room om het toe tepassen\r\ninvisible.disabled= Toeschouwer modes disabled herlaad de room om het toe tepassen \r\nban.notallowed=Je heb geen toestemming om deze gebruiker te bannen\r\nban.toolesstime=Ban tijd is in seconds en moet minimal 600 secondes zijn(tienminuuten) Je kan beter bannen bannen via de MOD \r\ndisconnect.notallwed=Je heb geen rechten om deze gebruiker te disconnecten\r\nroomkick.allert=Je bent gekikt door een stafflid \r\nmute.notallowed=Je hebt niet de rechten om die gebruiker te unmuten.\r\nkick.notallwed=Je heb niet de rechten om deze gebruiker te kikken.\r\nkick.error=Deze gebruiker is niet in een kamer en kan dus niet worden gekikt.\r\nkick.nomessage=Een stafflid heeft je gekikt uit de kamer.\r\nkick.withmessage=Een stafflid heeft je gekikt uit de kamer om de volgende reden: \r\ninfo.serveruptime=Server uptime: \r\ninfo.onlineusers=Sunnies online: \r\ninfo.activerooms=Actieve kamers: \r\nfriends.disabled=Vrienden verzoeken disabled\r\nfriends.enabled=Vrienden verzoeken enabled\r\ntrade.enable=Ruilen enabled\r\ntrade.disable=Ruilen disabled\r\nwheresmypet.output1= is in \r\nwheresmypet.output2=Je hand\r\nwheresmypet.output3=de kamer\r\nwheresmypet.output4=van wie de eigenaar is:\r\nforcerot.inputerror=Input error: De input moet zijn tussen 0 en 6\r\nempty.dbcleared=Inventory cleared! (Database and cache)\r\nempty.cachecleared=Inventory cleared! (Database)\r\nempty.cleared=Inventory cleared!\r\n\r\n[COMMAND ERROR MESSAGES]\r\ninput.intonly=Alleen nummers gebruiken!\r\ninput.usernotfound=Gebruiker is niet gevonden\r\ninput.userparammissing= Graag een gebruiker invullen\r\n\r\n[NOTIFICATIONS]\r\ncatalog.gift.received=Je hebt een cadeau ontvangen\r\n\r\nuser.maxpetreached=Er zijn teveel huisdieren in de kamer je heb het maximum overschreden\r\nuser.enterinfobus=De infobus werkt nog niet helemaal\r\nuser.tradedisabled=Deze gebruiker heeft ruilen uit staan.\r\nuser.maxmoodlightsreached=Je kan maar 1 sfeer verlichter in je kamer hebben.\r\nuser.giverights.error=Gebruiker heeft al rechten\r\nuser.roomdata.rightserror=Het is niet toegestaan om je kamer in deze categorie te zetten je kamer staat nu in de geen categorie\r\nuser.ismuted=Je bent gemuted\r\nuser.loadusererror=Kan niet de gebruikers info laden , niet bestaande gebruiker\r\nuser.allreadylogedon=Je bent al ingelogt!\r\nuser.badgereceived=Je heb een badge ontvangen van een stafflid\r\nuser.creditsreceived=Je heb zoveel credits gekregen van een stafflid:\r\nuser.petinfoerror=De huisdier die je geselecteert heb is niet in deze kamer\r\nlogin.invalidsso=Probeer het opnieuw aub! Je login ticket klopt niet\r\nuser.notpermitted=Je hebt geen toestemming om deze command uit te voeren\r\nuser.unacceptable_motto=Je motto is tegen de regels!\r\ntrade.failed=Ruilen niet gelukt.\r\n\r\nroom.noaccess=Deze kamer is alleen voor sunnie staff.\r\nroom.roomfull=Deze kamer is vol.\r\nroom.roomdataloaderror=Er is een fout opgetreden probeer nogmaals de kamer te openen.\r\nroom.missingmodeldata=Sorry de kamer modeldata is niet gevonden en kan daarom ook niet worden geladen.\r\nroom.namelengthshort=Je kamer naam is te kort om gebouwd te worden !\r\nroom.missingclub=Je moet een Sunnie club VIP zijn om deze kamer layout te gebruiken.\r\nroom.modelmissing=Sorry, deze room model is nog niet toegevoegd probeer het later nogmaals.\r\nroom.itemplaced=WAARSCHUWING deze item was al in de kamer en is niet uit je hand gezet. De items is uit je hand gezet.\r\nserver.full=De server is momenteel vol!\r\ncatalog.offerexpired=Sorry deze aanbieding is verlopen.\r\ncatalog.missingclubmembership=Deze pagina is alleen voor Sunnie club VIP leden!\r\ncatalog.pickname=Geef een naam:\r\ncatalog.pickcolor=Kies een kleur:\r\ncatalog.pickrace=Kies een ras:\r\ncatalog.waystogetcredits=Andere manieren om credits te kopen >\r\ncatalog.buyerror=Er is iets fouts gegaan de meubel kan niet in je inventaris worden gezet probeer hem niet meer te kopen en zeg dit tegen een stafflid en om welke meubel het gaat!\r\ncatalog.gift.sent=Kado succesvol verstuurt ! \r\ncatalog.gift.send.error=Deze meubel kan je niet versturen al seen kado.\r\ncatalog.pets.maxpets=Je kan maar max 5 huisdieren hebben \r\ncatalog.crystalerror=Je hebt niet genoeg belcredits. Je hebt het volgende aantal nodig: \r\ncatalog.crystalsbought=Je hebt net een item gekocht dat belcredits kost. Je hebt nog zoveel belcredits: \r\ncatalog.oudebelcreditserror=Je hebt niet genoeg Kado credits. Je hebt het volgende aantal nodig: \r\ncatalog.oudebelcreditsok=Je hebt net een item gekocht dat Kado Credits kost. Je hebt nog zoveel Kado Credits: \r\n\r\n\r\nmoderation.whisper=Verluisteren naar\r\nmoderation.muted=Je bent gemuted door een sunnie stafflid \r\nmoderation.unmuted=Je bent geunmuted door een sunnie stafflid\r\nmoderation.ban.missingrank=Je heb niet de rechten om deze gebruiker te bannen\r\nmoderation.caution.missingrank=You do not have permission to caution that user, sending as a regular message instead.\r\nmoderation.kick.missingrank=Je heb niet de rechten om deze gebruiker te kikken.\r\nmoderation.room.roomclosed=Kamer niet toegestaan door de Sunnie staff !\r\nmoderation.banned=Je bent verbannen:\r\nmoderation.banmessage=Een sunnie stafflid heeft je uit het hotel gekickt:\r\n\r\nconsole.noticefromadmin=Notitie van server administrator:\r\nfilter.sencored=subba\r\n[BOTS]\r\nguide.message=Hoi en welkom ik ben een guide bot ik ben er hier om je te helpen.\r\nguide.question=Ik kan je tips geven en hint met wat je allemaal kan doen hier, vraag maar raak!\r\nOnusershout=Het is niet nodig om te schreeuwen!\r\n";

        async Task IStartableService.Start()
        {
            var path = Path.Combine(Environment.CurrentDirectory, "System/locale.ini");
            if (!File.Exists(path))
            {
                Directory.CreateDirectory(Path.Combine(Environment.CurrentDirectory, "System"));
                await File.AppendAllTextAsync(path, locale);
            }
            Values = path.ReadFile();
            logger.LogInformation("LanguageLocale has been loaded with {count} language definitions", Values.Count);
        }

        string? ILanguageLocale.Format(string original, params object[] args)
            => string.Format(((ILanguageLocale)this).GetValue(original), args);

        string ILanguageLocale.GetValue(string value)
            => Values.TryGetValue(value, out string? returnValue) ? returnValue : throw new Exception($"Missing language locale for {value}");
    }
}